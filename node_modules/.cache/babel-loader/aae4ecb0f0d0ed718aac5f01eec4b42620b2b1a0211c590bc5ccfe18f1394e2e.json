{"ast":null,"code":"import _objectSpread from\"C:/Users/trs_user/Documents/my/bntu-library/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/trs_user/Documents/my/bntu-library/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import styles from\"./Table.module.scss\";import{useTable}from\"react-table\";import Paginator from\"../Paginator/Paginator\";import Btn from\"../Btn/Btn\";import{IconArrowDown,IconExport}from\"../../assets/icons/icons\";import{useClickOutside}from\"@react-hookz/web\";import ExcelExportBtn from\"../ExcelExportBtn\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Table(_ref){var columns=_ref.columns,data=_ref.data,dataCount=_ref.dataCount,currentPage=_ref.currentPage,setCurrentPage=_ref.setCurrentPage;var _useState=useState(),_useState2=_slicedToArray(_useState,2),isExportMenuOpen=_useState2[0],setExportMenuOpen=_useState2[1];var tableInstance=useTable({columns:columns,data:data});var getTableProps=tableInstance.getTableProps,getTableBodyProps=tableInstance.getTableBodyProps,headerGroups=tableInstance.headerGroups,rows=tableInstance.rows,prepareRow=tableInstance.prepareRow;return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tableHeader,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432: \",dataCount]}),/*#__PURE__*/_jsxs(Btn,{id:\"export-toggle\",className:styles.export,onClick:function onClick(){setExportMenuOpen(!isExportMenuOpen);},children:[/*#__PURE__*/_jsx(IconExport,{id:\"export-toggle-icon\"}),/*#__PURE__*/_jsx(\"span\",{id:\"export-toggle-text\",children:\"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B\"}),/*#__PURE__*/_jsx(IconArrowDown,{id:\"export-toggle-icon2\"})]}),isExportMenuOpen&&/*#__PURE__*/_jsx(ExportMenu,{data:data,columns:columns,closeMenu:function closeMenu(){setExportMenuOpen(false);}})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.tableContainer,children:/*#__PURE__*/_jsxs(\"table\",_objectSpread(_objectSpread({},getTableProps()),{},{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:headerGroups.map(function(headerGroup){return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},headerGroup.getHeaderGroupProps()),{},{children:headerGroup.headers.map(function(column){return/*#__PURE__*/_jsx(\"th\",_objectSpread(_objectSpread({},column.getHeaderProps()),{},{children:column.render(\"Header\")}));})}));})}),/*#__PURE__*/_jsx(\"tbody\",_objectSpread(_objectSpread({},getTableBodyProps()),{},{children:rows.map(function(row){prepareRow(row);return/*#__PURE__*/_jsx(\"tr\",_objectSpread(_objectSpread({},row.getRowProps()),{},{children:row.cells.map(function(cell){return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},cell.getCellProps()),{},{children:cell.render(\"Cell\")}));})}));})}))]}))}),/*#__PURE__*/_jsx(\"div\",{className:styles.tableFooter,children:/*#__PURE__*/_jsx(Paginator,{dataCount:dataCount,currentPage:currentPage,setCurrentPage:setCurrentPage})})]});}export default Table;var ExportMenu=function ExportMenu(_ref2){var data=_ref2.data,columns=_ref2.columns,closeMenu=_ref2.closeMenu;var defaultFileName=\"table\";var menuRef=useRef(null);useClickOutside(menuRef,function(e){if(!e.target.id.includes(\"export-toggle\")){closeMenu();}});return/*#__PURE__*/_jsx(\"div\",{ref:menuRef,className:styles.exportMenu,children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(ExcelExportBtn,{csvData:data,columns:columns,fileName:defaultFileName,closeMenu:closeMenu})})})});};","map":{"version":3,"names":["React","useRef","useState","styles","useTable","Paginator","Btn","IconArrowDown","IconExport","useClickOutside","ExcelExportBtn","jsxs","_jsxs","jsx","_jsx","Table","_ref","columns","data","dataCount","currentPage","setCurrentPage","_useState","_useState2","_slicedToArray","isExportMenuOpen","setExportMenuOpen","tableInstance","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","className","container","children","tableHeader","id","export","onClick","ExportMenu","closeMenu","tableContainer","_objectSpread","table","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","row","getRowProps","cells","cell","getCellProps","tableFooter","_ref2","defaultFileName","menuRef","e","target","includes","ref","exportMenu","csvData","fileName"],"sources":["C:/Users/trs_user/Documents/my/bntu-library/src/components/Table/Table.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport styles from \"./Table.module.scss\";\r\nimport { useTable } from \"react-table\";\r\nimport Paginator from \"../Paginator/Paginator\";\r\nimport Btn from \"../Btn/Btn\";\r\nimport { IconArrowDown, IconExport } from \"../../assets/icons/icons\";\r\nimport { useClickOutside } from \"@react-hookz/web\";\r\nimport ExcelExportBtn from \"../ExcelExportBtn\";\r\n\r\nfunction Table({ columns, data, dataCount, currentPage, setCurrentPage }) {\r\n  const [isExportMenuOpen, setExportMenuOpen] = useState();\r\n\r\n  const tableInstance = useTable({ columns, data });\r\n\r\n  const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } =\r\n    tableInstance;\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.tableHeader}>\r\n        <p>Результатов: {dataCount}</p>\r\n        <Btn\r\n          id=\"export-toggle\"\r\n          className={styles.export}\r\n          onClick={() => {\r\n            setExportMenuOpen(!isExportMenuOpen);\r\n          }}\r\n        >\r\n          <IconExport id=\"export-toggle-icon\" />\r\n          <span id=\"export-toggle-text\">Экспорт таблицы</span>\r\n          <IconArrowDown id=\"export-toggle-icon2\" />\r\n        </Btn>\r\n        {isExportMenuOpen && (\r\n          <ExportMenu\r\n            data={data}\r\n            columns={columns}\r\n            closeMenu={() => {\r\n              setExportMenuOpen(false);\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className={styles.tableContainer}>\r\n        <table {...getTableProps()} className={styles.table}>\r\n          <thead>\r\n            {headerGroups.map((headerGroup) => (\r\n              <tr {...headerGroup.getHeaderGroupProps()}>\r\n                {headerGroup.headers.map((column) => (\r\n                  <th {...column.getHeaderProps()}>\r\n                    {column.render(\"Header\")}\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </thead>\r\n\r\n          <tbody {...getTableBodyProps()}>\r\n            {rows.map((row) => {\r\n              prepareRow(row);\r\n              return (\r\n                <tr {...row.getRowProps()}>\r\n                  {row.cells.map((cell) => {\r\n                    return (\r\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\r\n                    );\r\n                  })}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div className={styles.tableFooter}>\r\n        <Paginator\r\n          dataCount={dataCount}\r\n          currentPage={currentPage}\r\n          setCurrentPage={setCurrentPage}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Table;\r\n\r\nconst ExportMenu = ({ data, columns, closeMenu }) => {\r\n  const defaultFileName = \"table\";\r\n  const menuRef = useRef(null);\r\n\r\n  useClickOutside(menuRef, (e) => {\r\n    if (!e.target.id.includes(\"export-toggle\")) {\r\n      closeMenu();\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div ref={menuRef} className={styles.exportMenu}>\r\n      <ul>\r\n        <li>\r\n          <ExcelExportBtn\r\n            csvData={data}\r\n            columns={columns}\r\n            fileName={defaultFileName}\r\n            closeMenu={closeMenu}\r\n          />\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}