{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useMemo, useRef } from 'react';\nimport { useUnmountEffect } from '../useUnmountEffect';\n/**\n * Makes passed function debounced, otherwise acts like `useCallback`.\n *\n * @param callback Function that will be debounced.\n * @param deps Dependencies list when to update callback.\n * @param delay Debounce delay.\n * @param maxWait The maximum time `callback` is allowed to be delayed before\n * it's invoked. 0 means no max wait.\n */\nexport function useDebouncedCallback(callback, deps, delay) {\n  let maxWait = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  const timeout = useRef();\n  const waitTimeout = useRef();\n  const lastCall = useRef();\n  const clear = () => {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n      timeout.current = undefined;\n    }\n    if (waitTimeout.current) {\n      clearTimeout(waitTimeout.current);\n      waitTimeout.current = undefined;\n    }\n  };\n  // cancel scheduled execution on unmount\n  useUnmountEffect(clear);\n  return useMemo(() => {\n    const execute = () => {\n      // barely possible to test this line\n      /* istanbul ignore next */\n      if (!lastCall.current) return;\n      const context = lastCall.current;\n      lastCall.current = undefined;\n      callback.apply(context.this, context.args);\n      clear();\n    };\n    // eslint-disable-next-line func-names\n    const wrapped = function () {\n      if (timeout.current) {\n        clearTimeout(timeout.current);\n      }\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      lastCall.current = {\n        args,\n        this: this\n      };\n      // plan regular execution\n      timeout.current = setTimeout(execute, delay);\n      // plan maxWait execution if required\n      if (maxWait > 0 && !waitTimeout.current) {\n        waitTimeout.current = setTimeout(execute, maxWait);\n      }\n    };\n    Object.defineProperties(wrapped, {\n      length: {\n        value: callback.length\n      },\n      name: {\n        value: `${callback.name || 'anonymous'}__debounced__${delay}`\n      }\n    });\n    return wrapped;\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps,@typescript-eslint/no-unsafe-assignment\n  [delay, maxWait, ...deps]);\n}","map":{"version":3,"names":["useMemo","useRef","useUnmountEffect","useDebouncedCallback","callback","deps","delay","maxWait","arguments","length","undefined","timeout","waitTimeout","lastCall","clear","current","clearTimeout","execute","context","apply","this","args","wrapped","_len","Array","_key","setTimeout","Object","defineProperties","value","name"],"sources":["C:/Users/trs_user/Documents/my/bntu-library/node_modules/@react-hookz/web/esm/useDebouncedCallback/index.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useMemo, useRef } from 'react';\nimport { useUnmountEffect } from '../useUnmountEffect';\n/**\n * Makes passed function debounced, otherwise acts like `useCallback`.\n *\n * @param callback Function that will be debounced.\n * @param deps Dependencies list when to update callback.\n * @param delay Debounce delay.\n * @param maxWait The maximum time `callback` is allowed to be delayed before\n * it's invoked. 0 means no max wait.\n */\nexport function useDebouncedCallback(callback, deps, delay, maxWait = 0) {\n    const timeout = useRef();\n    const waitTimeout = useRef();\n    const lastCall = useRef();\n    const clear = () => {\n        if (timeout.current) {\n            clearTimeout(timeout.current);\n            timeout.current = undefined;\n        }\n        if (waitTimeout.current) {\n            clearTimeout(waitTimeout.current);\n            waitTimeout.current = undefined;\n        }\n    };\n    // cancel scheduled execution on unmount\n    useUnmountEffect(clear);\n    return useMemo(() => {\n        const execute = () => {\n            // barely possible to test this line\n            /* istanbul ignore next */\n            if (!lastCall.current)\n                return;\n            const context = lastCall.current;\n            lastCall.current = undefined;\n            callback.apply(context.this, context.args);\n            clear();\n        };\n        // eslint-disable-next-line func-names\n        const wrapped = function (...args) {\n            if (timeout.current) {\n                clearTimeout(timeout.current);\n            }\n            lastCall.current = { args, this: this };\n            // plan regular execution\n            timeout.current = setTimeout(execute, delay);\n            // plan maxWait execution if required\n            if (maxWait > 0 && !waitTimeout.current) {\n                waitTimeout.current = setTimeout(execute, maxWait);\n            }\n        };\n        Object.defineProperties(wrapped, {\n            length: { value: callback.length },\n            name: { value: `${callback.name || 'anonymous'}__debounced__${delay}` },\n        });\n        return wrapped;\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps,@typescript-eslint/no-unsafe-assignment\n    [delay, maxWait, ...deps]);\n}\n"],"mappings":"AAAA;AACA,SAASA,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACvC,SAASC,gBAAgB,QAAQ,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,oBAAoBA,CAACC,QAAQ,EAAEC,IAAI,EAAEC,KAAK,EAAe;EAAA,IAAbC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EACnE,MAAMG,OAAO,GAAGV,MAAM,EAAE;EACxB,MAAMW,WAAW,GAAGX,MAAM,EAAE;EAC5B,MAAMY,QAAQ,GAAGZ,MAAM,EAAE;EACzB,MAAMa,KAAK,GAAGA,CAAA,KAAM;IAChB,IAAIH,OAAO,CAACI,OAAO,EAAE;MACjBC,YAAY,CAACL,OAAO,CAACI,OAAO,CAAC;MAC7BJ,OAAO,CAACI,OAAO,GAAGL,SAAS;IAC/B;IACA,IAAIE,WAAW,CAACG,OAAO,EAAE;MACrBC,YAAY,CAACJ,WAAW,CAACG,OAAO,CAAC;MACjCH,WAAW,CAACG,OAAO,GAAGL,SAAS;IACnC;EACJ,CAAC;EACD;EACAR,gBAAgB,CAACY,KAAK,CAAC;EACvB,OAAOd,OAAO,CAAC,MAAM;IACjB,MAAMiB,OAAO,GAAGA,CAAA,KAAM;MAClB;MACA;MACA,IAAI,CAACJ,QAAQ,CAACE,OAAO,EACjB;MACJ,MAAMG,OAAO,GAAGL,QAAQ,CAACE,OAAO;MAChCF,QAAQ,CAACE,OAAO,GAAGL,SAAS;MAC5BN,QAAQ,CAACe,KAAK,CAACD,OAAO,CAACE,IAAI,EAAEF,OAAO,CAACG,IAAI,CAAC;MAC1CP,KAAK,EAAE;IACX,CAAC;IACD;IACA,MAAMQ,OAAO,GAAG,SAAAA,CAAA,EAAmB;MAC/B,IAAIX,OAAO,CAACI,OAAO,EAAE;QACjBC,YAAY,CAACL,OAAO,CAACI,OAAO,CAAC;MACjC;MAAC,SAAAQ,IAAA,GAAAf,SAAA,CAAAC,MAAA,EAHwBY,IAAI,OAAAG,KAAA,CAAAD,IAAA,GAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;QAAJJ,IAAI,CAAAI,IAAA,IAAAjB,SAAA,CAAAiB,IAAA;MAAA;MAI7BZ,QAAQ,CAACE,OAAO,GAAG;QAAEM,IAAI;QAAED,IAAI,EAAE;MAAK,CAAC;MACvC;MACAT,OAAO,CAACI,OAAO,GAAGW,UAAU,CAACT,OAAO,EAAEX,KAAK,CAAC;MAC5C;MACA,IAAIC,OAAO,GAAG,CAAC,IAAI,CAACK,WAAW,CAACG,OAAO,EAAE;QACrCH,WAAW,CAACG,OAAO,GAAGW,UAAU,CAACT,OAAO,EAAEV,OAAO,CAAC;MACtD;IACJ,CAAC;IACDoB,MAAM,CAACC,gBAAgB,CAACN,OAAO,EAAE;MAC7Bb,MAAM,EAAE;QAAEoB,KAAK,EAAEzB,QAAQ,CAACK;MAAO,CAAC;MAClCqB,IAAI,EAAE;QAAED,KAAK,EAAG,GAAEzB,QAAQ,CAAC0B,IAAI,IAAI,WAAY,gBAAexB,KAAM;MAAE;IAC1E,CAAC,CAAC;IACF,OAAOgB,OAAO;EAClB,CAAC;EACD;EACA,CAAChB,KAAK,EAAEC,OAAO,EAAE,GAAGF,IAAI,CAAC,CAAC;AAC9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}