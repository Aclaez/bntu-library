{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\trs_user\\\\Documents\\\\my\\\\bntu-library\\\\src\\\\pages\\\\IndexH\\\\IndexH.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"./IndexH.module.scss\";\nimport DataPageLayout from \"../../components/DataPageLayout/DataPageLayout\";\nimport SearchBar from \"../../components/SearchBar/SearchBar\";\nimport Table from \"../../components/Table/Table\";\nimport { filtersByDefault, filtersList, getTransformedData, searchFieldsList, tableColumns } from \"../../variables/index\";\nimport { api } from \"../../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction IndexH() {\n  _s();\n  const [columns, setColumns] = useState(tableColumns);\n  const [data, setData] = useState({});\n  const [dataCount, setDataCount] = useState(0);\n  const [isError, setError] = useState(false);\n  const [query, setQuery] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(() => {\n    setError(false);\n    if (query) {\n      api.getWorks(query, currentPage).then(data => {\n        setData(getTransformedData(data.results));\n        setDataCount(data.meta.count);\n      }).catch(err => {\n        setError(true);\n        setData([]);\n        setDataCount(0);\n        console.error(err);\n      });\n    }\n  }, [query, currentPage]);\n  useEffect(() => {\n    console.log(data);\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(DataPageLayout, {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      title: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441 h\",\n      fieldsNames: searchFieldsList,\n      columns: columns,\n      setColumns: setColumns,\n      filtersList: filtersList,\n      filtersByDefault: filtersByDefault,\n      setQuery: setQuery,\n      currentPage: currentPage,\n      setCurrentPage: setCurrentPage,\n      setError: setError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), !isError && data.length > 0 && /*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      data: data,\n      dataCount: dataCount,\n      currentPage: currentPage,\n      setCurrentPage: setCurrentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), data.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.informer,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.text,\n        children: \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), isError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.informer,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.text,\n        children: \"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430, \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E\\u0441\\u0442\\u044C \\u0432\\u0432\\u0435\\u0434\\u0451\\u043D\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0438 \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(IndexH, \"sePHx+/Hjd7kgATD2i0c6zup4hs=\");\n_c = IndexH;\nexport default IndexH;\nvar _c;\n$RefreshReg$(_c, \"IndexH\");","map":{"version":3,"names":["React","useEffect","useState","styles","DataPageLayout","SearchBar","Table","filtersByDefault","filtersList","getTransformedData","searchFieldsList","tableColumns","api","jsxDEV","_jsxDEV","IndexH","_s","columns","setColumns","data","setData","dataCount","setDataCount","isError","setError","query","setQuery","currentPage","setCurrentPage","getWorks","then","results","meta","count","catch","err","console","error","log","children","title","fieldsNames","fileName","_jsxFileName","lineNumber","columnNumber","length","className","informer","text","_c","$RefreshReg$"],"sources":["C:/Users/trs_user/Documents/my/bntu-library/src/pages/IndexH/IndexH.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./IndexH.module.scss\";\r\nimport DataPageLayout from \"../../components/DataPageLayout/DataPageLayout\";\r\nimport SearchBar from \"../../components/SearchBar/SearchBar\";\r\nimport Table from \"../../components/Table/Table\";\r\nimport {\r\n  filtersByDefault,\r\n  filtersList,\r\n  getTransformedData,\r\n  searchFieldsList,\r\n  tableColumns,\r\n} from \"../../variables/index\";\r\nimport { api } from \"../../api/api\";\r\n\r\nfunction IndexH() {\r\nconst [columns, setColumns] = useState(tableColumns);\r\n  const [data, setData] = useState({});\r\n  const [dataCount, setDataCount] = useState(0);\r\n  const [isError, setError] = useState(false);\r\n\r\n  const [query, setQuery] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n\r\n  useEffect(() => {\r\n    setError(false);\r\n\r\n    if (query) {\r\n      api\r\n        .getWorks(query, currentPage)\r\n        .then((data) => {\r\n          setData(getTransformedData(data.results));\r\n          setDataCount(data.meta.count);\r\n        })\r\n        .catch((err) => {\r\n          setError(true);\r\n          setData([]);\r\n          setDataCount(0);\r\n          console.error(err);\r\n        });\r\n    }\r\n  }, [query, currentPage]);\r\n\r\n  useEffect(() => {\r\n    console.log(data);\r\n  }, [data]);\r\n\r\n  return (\r\n    <DataPageLayout>\r\n      <SearchBar\r\n        title=\"Поиск индекс h\"\r\n        fieldsNames={searchFieldsList}\r\n        columns={columns}\r\n        setColumns={setColumns}\r\n        filtersList={filtersList}\r\n        filtersByDefault={filtersByDefault}\r\n        setQuery={setQuery}\r\n        currentPage={currentPage}\r\n        setCurrentPage={setCurrentPage}\r\n        setError={setError}\r\n      />\r\n      {!isError && data.length > 0 && (\r\n        <Table\r\n          columns={columns}\r\n          data={data}\r\n          dataCount={dataCount}\r\n          currentPage={currentPage}\r\n          setCurrentPage={setCurrentPage}\r\n        />\r\n      )}\r\n\r\n      {data.length === 0 && (\r\n        <div className={styles.informer}>\r\n          <p className={styles.text}>По вашему запросу ничего не найдено</p>\r\n        </div>\r\n      )}\r\n\r\n      {isError && (\r\n        <div className={styles.informer}>\r\n          <p className={styles.text}>\r\n            Произошла ошибка, проверьте корректность введённых данных и\r\n            попробуйте повторить запрос\r\n          </p>\r\n        </div>\r\n      )}\r\n    </DataPageLayout>\r\n  );\r\n}\r\n\r\nexport default IndexH;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}