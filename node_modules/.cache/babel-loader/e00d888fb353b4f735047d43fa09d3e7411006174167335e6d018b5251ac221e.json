{"ast":null,"code":"import { useCallback, useState } from 'react';\nimport { useSyncedRef } from '../useSyncedRef';\nimport { resolveHookState } from \"../util/resolveHookState.js\";\n/**\n * Like `useState`, but every value set is passed through a mediator function.\n */\nexport function useMediatedState(initialState, mediator) {\n  const [state, setState] = useState(() => {\n    return mediator ? mediator(resolveHookState(initialState)) : initialState;\n  });\n  const mediatorRef = useSyncedRef(mediator);\n  return [state, useCallback(value => {\n    if (mediatorRef.current) {\n      setState(prevState => mediatorRef.current?.(resolveHookState(value, prevState)));\n    } else {\n      setState(value);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])];\n}","map":{"version":3,"names":["useCallback","useState","useSyncedRef","resolveHookState","useMediatedState","initialState","mediator","state","setState","mediatorRef","value","current","prevState"],"sources":["C:/Users/trs_user/Documents/my/bntu-library/node_modules/@react-hookz/web/esm/useMediatedState/index.js"],"sourcesContent":["import { useCallback, useState } from 'react';\nimport { useSyncedRef } from '../useSyncedRef';\nimport { resolveHookState } from \"../util/resolveHookState.js\";\n/**\n * Like `useState`, but every value set is passed through a mediator function.\n */\nexport function useMediatedState(initialState, mediator) {\n    const [state, setState] = useState(() => {\n        return mediator ? mediator(resolveHookState(initialState)) : initialState;\n    });\n    const mediatorRef = useSyncedRef(mediator);\n    return [\n        state,\n        useCallback((value) => {\n            if (mediatorRef.current) {\n                setState((prevState) => mediatorRef.current?.(resolveHookState(value, prevState)));\n            }\n            else {\n                setState(value);\n            }\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n        }, []),\n    ];\n}\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AAC7C,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,gBAAgB,QAAQ,6BAA6B;AAC9D;AACA;AACA;AACA,OAAO,SAASC,gBAAgBA,CAACC,YAAY,EAAEC,QAAQ,EAAE;EACrD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,MAAM;IACrC,OAAOK,QAAQ,GAAGA,QAAQ,CAACH,gBAAgB,CAACE,YAAY,CAAC,CAAC,GAAGA,YAAY;EAC7E,CAAC,CAAC;EACF,MAAMI,WAAW,GAAGP,YAAY,CAACI,QAAQ,CAAC;EAC1C,OAAO,CACHC,KAAK,EACLP,WAAW,CAAEU,KAAK,IAAK;IACnB,IAAID,WAAW,CAACE,OAAO,EAAE;MACrBH,QAAQ,CAAEI,SAAS,IAAKH,WAAW,CAACE,OAAO,GAAGR,gBAAgB,CAACO,KAAK,EAAEE,SAAS,CAAC,CAAC,CAAC;IACtF,CAAC,MACI;MACDJ,QAAQ,CAACE,KAAK,CAAC;IACnB;IACA;EACJ,CAAC,EAAE,EAAE,CAAC,CACT;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}